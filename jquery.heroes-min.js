/**
 * jQuery Heroes
 * v1.0 (6/6/2012)
 *
 * Copyright (c) 2012, Tim Wagner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation 
 * and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, 
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS 
 * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE 
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT 
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 **/

(function(d){var b={mergedSettings:{},currentlyHighlighting:false,defaultOptions:{overlayOpacity:0.3,overlayColor:"#333",animateOverlay:true,animationSpeed:500,animationEasing:"",clickOverlayToClose:true,beforeShowHeroes:function(){},afterShowHeroes:function(){},beforeHideHeroes:function(){},afterHideHeroes:function(){}}};var c={saveOldStyles:function(e){e.data("heroes-old-position",e.css("position"));e.data("heroes-old-zindex",e.css("z-index"))},restoreOldStyles:function(e){e.css({position:e.data("heroes-old-position"),"z-index":e.data("heroes-old-zindex")})},hideHeroes:function(){var f=d("#heroes-overlay"),e=d(".heroes-highlighted");b.mergedSettings.beforeHideHeroes();if(b.mergedSettings.animateOverlay){f.animate({opacity:0},b.mergedSettings.animationSpeed,b.mergedSettings.animationEasing,function(){e.each(function(){c.restoreOldStyles(d(this))}).removeClass("heroes-highlighted");f.remove();b.mergedSettings.afterHideHeroes();b.currentlyHighlighting=false})}else{f.css("opacity","0");e.each(function(){c.restoreOldStyles(d(this))}).removeClass("heroes-highlighted");f.remove();b.mergedSettings.afterHideHeroes();b.currentlyHighlighting=false}}};var a={init:function(e){var g=null,f=d(this);d.extend(b.mergedSettings,b.defaultOptions,e);b.mergedSettings.beforeShowHeroes();f.each(function(){var h=d(this).addClass("heroes-highlighting");if(!h.hasClass("heroes-highlighted")){c.saveOldStyles(h)}h.css({position:h.data("heroes-old-position")=="static"?"relative":"static","z-index":"9999999"})});if(!b.currentlyHighlighting){g=d('<div id="heroes-overlay"></div>').css({position:"fixed",background:b.mergedSettings.overlayColor,opacity:"0",top:"0px",left:"0px",height:"100%",width:"100%","z-index":"9999998"});d("body").append(g);if(b.mergedSettings.animateOverlay){g.animate({opacity:b.mergedSettings.overlayOpacity},b.mergedSettings.animationSpeed,b.mergedSettings.animationEasing,b.mergedSettings.afterShowHeroes)}else{g.css("opacity",b.mergedSettings.overlayOpacity);b.mergedSettings.afterShowHeroes()}if(b.mergedSettings.clickOverlayToClose){g.off("click",c.hideHeroes).on("click",c.hideHeroes)}b.currentlyHighlighting=true}else{d(".heroes-highlighted:not(.heroes-highlighting)").each(function(){c.restoreOldStyles(d(this))}).removeClass("heroes-highlighted");b.mergedSettings.afterShowHeroes();if(b.mergedSettings.clickOverlayToClose){d("#heroes-overlay").off("click",c.hideHeroes).on("click",c.hideHeroes)}b.currentlyHighlighting=true}f.addClass("heroes-highlighted").removeClass("heroes-highlighting");return f},hideHeroes:c.hideHeroes};d.fn.heroes=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return a.init.apply(this,arguments)}else{d.error("Method "+e+" does not exist on jQuery.heroes")}}}})(jQuery);